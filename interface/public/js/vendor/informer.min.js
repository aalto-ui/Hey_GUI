(function(window){var document=window.document;function Informer(id,options){var self=this;this.defaults={pos:"bottom-left",css:{background:"#000",color:"#FFF",fontFamily:"sans-serif",fontSize:"18px",padding:"15px",margin:"10px",position:"fixed",zIndex:getNextHighestDepth()},delay:0,close:true,on:{show:function(){},hide:function(){},reset:function(){}}};this.options=extend({},this.defaults,options||{});this.element=null;var hideTimer;function init(){if(!document.body)throw new Error("Informer notifications can only be displayed once the DOM is ready.");clearTimeout(hideTimer);var isNew=self.element===null;if(isNew){self.element=document.createElement("div");self.element.id=id||"informer-"+Date.now()}var tpl='<div class="informer-content" style="float:left; display:inline;"></div>';if(self.options.close){self.element.close=function(){window.event.preventDefault();self.hide()};tpl='<a href="#close" class="informer-close"                  style="float:right; display:inline; margin-left:1em; text-decoration:none; color:'+self.options.css.color+'; font-weight:bold;"                  onclick="this.parentNode.close()">&times;</a>'+tpl}self.element.innerHTML=tpl;if(isNew)document.body.appendChild(self.element)}this.config=function(conf){self.options=extend({},self.defaults,conf||{});init();if(!self.element)return self;for(var prop in self.options.css){self.element.style[prop]=self.options.css[prop]}var parts=self.options.pos.split("-");self.element.style[parts[0]]=self.options.css.margin;self.element.style[parts[1]]=self.options.css.margin;return self};this.show=function(content,conf){self.reset().config(conf);if(!self.element)return self;self.element.style.display="inline-block";self.element.querySelector(".informer-content").innerHTML=content;if(typeof self.options.on.show==="function")self.options.on.show();if(self.options.delay>0){clearTimeout(hideTimer);hideTimer=setTimeout(self.hide,self.options.delay)}return self};this.hide=function(){if(!self.element)return self;self.element.style.display="none";if(typeof self.options.on.hide==="function")self.options.on.hide();return self};this.reset=function(){if(!self.element)return self;"top left bottom right".split(" ").forEach(function(prop){self.element.style[prop]=null});Object.keys(self.options.css).forEach(function(prop){self.element.style[prop]=null});if(typeof self.options.on.reset==="function")self.options.on.reset();return self}}function getNextHighestDepth(){var elems=document.getElementsByTagName("*");var index=0;for(var i=0,l=elems.length;i<l;++i){var el=elems[i];var z=parseFloat(document.defaultView.getComputedStyle(el,null).getPropertyValue("z-index"));if(z>index)index=z}return index+1}function extend(myObj){myObj=myObj||{};for(var i=1;i<arguments.length;i++){var obj=arguments[i];for(var key in obj){if(obj.hasOwnProperty(key)){if(typeof obj[key]==="object"){myObj[key]=extend(myObj[key],obj[key])}else{myObj[key]=obj[key]}}}}return myObj}window.Informer=Informer})(this);
